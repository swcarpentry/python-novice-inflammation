<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: Programming with Python</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap-responsive.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <div class="row-fluid">
        <div class="span10 offset1">
          <h1 class="title">Programming with Python</h1>
          <h2 class="subtitle">Testing and Documenting Functions</h2>
<div id="learning-objectives" class="objectives">
<h2>Learning Objectives</h2>
<ul>
<li>Test and debug a function.</li>
</ul>
</div>
<p>Once we start putting things in functions so that we can re-use them, we need to start testing that those functions are working correctly. To see how to do this, let's write a function to center a dataset around a particular value:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> center(data, desired):
    <span class="kw">return</span> (data - data.mean()) + desired</code></pre>
<p>We could test this on our actual data, but since we don't know what the values ought to be, it will be hard to tell if the result was correct. Instead, let's use NumPy to create a matrix of 0's and then center that around 3:</p>
<pre class="sourceCode python"><code class="sourceCode python">z = numpy.zeros((<span class="dv">2</span>,<span class="dv">2</span>))
<span class="dt">print</span> center(z, <span class="dv">3</span>)</code></pre>
<pre class="output"><code>[[ 3.  3.]
 [ 3.  3.]]</code></pre>
<p>That looks right, so let's try <code>center</code> on our real data:</p>
<pre class="sourceCode python"><code class="sourceCode python">data = numpy.loadtxt(fname=<span class="st">&#39;inflammation-01.csv&#39;</span>, delimiter=<span class="st">&#39;,&#39;</span>)
<span class="dt">print</span> center(data, <span class="dv">0</span>)</code></pre>
<pre class="output"><code>[[-6.14875 -6.14875 -5.14875 ..., -3.14875 -6.14875 -6.14875]
 [-6.14875 -5.14875 -4.14875 ..., -5.14875 -6.14875 -5.14875]
 [-6.14875 -5.14875 -5.14875 ..., -4.14875 -5.14875 -5.14875]
 ...,
 [-6.14875 -5.14875 -5.14875 ..., -5.14875 -5.14875 -5.14875]
 [-6.14875 -6.14875 -6.14875 ..., -6.14875 -4.14875 -6.14875]
 [-6.14875 -6.14875 -5.14875 ..., -5.14875 -5.14875 -6.14875]]</code></pre>
<p>It's hard to tell from the default output whether the result is correct, but there are a few simple tests that will reassure us:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">print</span> <span class="st">&#39;original min, mean, and max are:&#39;</span>, data.<span class="dt">min</span>(), data.mean(), data.<span class="dt">max</span>()
centered = center(data, <span class="dv">0</span>)
<span class="dt">print</span> <span class="st">&#39;min, mean, and and max of centered data are:&#39;</span>, centered.<span class="dt">min</span>(), centered.mean(), centered.<span class="dt">max</span>()</code></pre>
<pre class="output"><code>original min, mean, and max are: 0.0 6.14875 20.0
min, mean, and and max of centered data are: -6.14875 -3.49054118942e-15 13.85125</code></pre>
<p>That seems almost right: the original mean was about 6.1, so the lower bound from zero is how about -6.1. The mean of the centered data isn't quite zero --- we'll explore why not in the challenges --- but it's pretty close. We can even go further and check that the standard deviation hasn't changed:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">print</span> <span class="st">&#39;std dev before and after:&#39;</span>, data.std(), centered.std()</code></pre>
<pre class="output"><code>std dev before and after: 4.61383319712 4.61383319712</code></pre>
<p>Those values look the same, but we probably wouldn't notice if they were different in the sixth decimal place. Let's do this instead:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">print</span> <span class="st">&#39;difference in standard deviations before and after:&#39;</span>, data.std() - centered.std()</code></pre>
<pre class="output"><code>difference in standard deviations before and after: -3.5527136788e-15</code></pre>
<p>Again, the difference is very small. It's still possible that our function is wrong, but it seems unlikely enough that we should probably get back to doing our analysis. We have one more task first, though: we should write some <strong>documentation</strong> for our function to remind ourselves later what it's for and how to use it.</p>
<p>The usual way to put documentation in software is to add <strong>comments</strong> like this:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="co"># center(data, desired): return a new array containing the original data centered around the desired value.</span>
<span class="kw">def</span> center(data, desired):
    <span class="kw">return</span> (data - data.mean()) + desired</code></pre>
<p>There's a better way, though. If the first thing in a function is a string that isn't assigned to a variable, that string is attached to the function as its documentation:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> center(data, desired):
    <span class="co">&#39;&#39;&#39;Return a new array containing the original data centered around the desired value.&#39;&#39;&#39;</span>
    <span class="kw">return</span> (data - data.mean()) + desired</code></pre>
<p>This is better because we can now ask Python's built-in help system to show us the documentation for the function:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">help</span>(center)</code></pre>
<pre class="output"><code>Help on function center in module __main__:

center(data, desired)
    Return a new array containing the original data centered around the desired value.
</code></pre>
<p>A string like this is called a <strong>docstring</strong>. We don't need to use triple quotes when we write one, but if we do, we can break the string across multiple lines:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> center(data, desired):
    <span class="co">&#39;&#39;&#39;Return a new array containing the original data centered around the desired value.</span>
<span class="co">    Example: center([1, 2, 3], 0) =&gt; [-1, 0, 1]&#39;&#39;&#39;</span>
    <span class="kw">return</span> (data - data.mean()) + desired

<span class="dt">help</span>(center)</code></pre>
<pre class="output"><code>Help on function center in module __main__:

center(data, desired)
    Return a new array containing the original data centered around the desired value.
    Example: center([1, 2, 3], 0) =&gt; [-1, 0, 1]
</code></pre>
<div id="fixme" class="challenge">
<h2>FIXME</h2>
<p>Write a function <code>rescale</code> that takes an array as input and returns a corresponding array of values scaled to lie in the range 0.0 to 1.0. (If <span class="math"><em>L</em></span> and <span class="math"><em>H</em></span> are the lowest and highest values in the original array, then the replacement for a value <span class="math"><em>v</em></span> should be <span class="math">(<em>v</em> − <em>L</em>) / (<em>H</em> − <em>L</em>)</span>.) Be sure to give the function a docstring.</p>
</div>
<div id="fixme-1" class="challenge">
<h2>FIXME</h2>
<p>Run the commands <code>help(numpy.arange)</code> and <code>help(numpy.linspace)</code> to see how to use these functions to generate regularly-spaced values, then use those values to test your <code>rescale</code> function.</p>
</div>
        </div>
      </div>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/python-novice-inflammation">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="http://software-carpentry.org/v5/js/bootstrap/bootstrap.min.js"></script>
  </body>
</html>
